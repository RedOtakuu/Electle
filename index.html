<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electle - Daily Parliament</title>
    
    <!-- –§–∞–≤–∏–∫–æ–Ω–∫–∞ (–ò–∫–æ–Ω–∫–∞ –≤–∫–ª–∞–¥–∫–∏) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèõÔ∏è</text></svg>">

    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
    
    <style>
        :root {
            --bg-color: #1a1a1b;
            --ocean-color: #2c2c2e;
            --text-color: #ffffff;
            --accent-blue: #4a90e2;
            --correct-green: #538d4e;
            --partial-yellow: #b59f3b;
            --wrong-red: #3a3a3c;
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh; overflow: hidden;
        }

        /* –ó–ê–ì–û–õ–û–í–û–ö –ò –ü–û–î–ó–ê–ì–û–õ–û–í–û–ö */
        header { 
            padding: 15px 10px; width: 100%; text-align: center; 
            background: var(--bg-color); z-index: 10; border-bottom: 1px solid #333;
        }
        h1 { margin: 0; font-size: 1.5rem; letter-spacing: 2px; text-transform: uppercase; }
        .subtitle { 
            margin: 5px 0 0 0; font-size: 0.9rem; color: #aaa; font-weight: normal; 
            max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.4;
        }

        /* –î–ò–ê–ì–†–ê–ú–ú–ê (–£–í–ï–õ–ò–ß–ï–ù–ê) */
        .top-section { margin-top: 15px; width: 100%; display: flex; justify-content: center; flex-shrink: 0; }
        
        .diagram-container {
            background: white; 
            padding: 10px; 
            border-radius: var(--border-radius); 
            height: 220px; /* –ë—ã–ª–æ 160, —Å—Ç–∞–ª–æ –±–æ–ª—å—à–µ */
            width: 400px;  /* –®–∏—Ä–∏–Ω–∞ —Ç–æ–∂–µ –±–æ–ª—å—à–µ */
            max-width: 90%; /* –ß—Ç–æ–±—ã –≤–ª–µ–∑–∞–ª–æ –≤ –º–æ–±–∏–ª–∫–∏ */
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); 
            display: flex; align-items: center; justify-content: center;
        }
        
        .diagram-container img { 
            max-height: 100%; 
            max-width: 100%; 
            width: auto; 
            height: auto; 
            object-fit: contain; 
            display: block; 
        }

        /* –ö–ê–†–¢–ê */
        .map-wrapper {
            width: 95%; max-width: 1000px; 
            flex-grow: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ */
            background-color: var(--ocean-color); border: 1px solid #444;
            border-radius: var(--border-radius); position: relative; overflow: hidden; margin: 15px 0;
        }
        svg { width: 100%; height: 100%; cursor: grab; }
        svg:active { cursor: grabbing; }

        path { fill: #d3d3d3; stroke: #111; stroke-width: 0.5px; transition: fill 0.3s; cursor: pointer; }
        path:hover { fill: #bbb; }
        path.selected { fill: var(--accent-blue) !important; }
        path.correct { fill: var(--correct-green) !important; }
        path.wrong { fill: var(--wrong-red) !important; opacity: 0.4; }
        path.regional { fill: var(--partial-yellow) !important; opacity: 0.8; }

        .zoom-controls { position: absolute; bottom: 10px; right: 10px; display: flex; flex-direction: column; gap: 5px; }
        .zoom-btn { width: 35px; height: 35px; background: rgba(0,0,0,0.6); color: white; border: 1px solid #555; border-radius: 4px; cursor: pointer; font-size: 20px; display:flex; justify-content:center; align-items:center; }

        /* –£–ü–†–ê–í–õ–ï–ù–ò–ï */
        .bottom-section { width: 95%; max-width: 600px; padding-bottom: 20px; display: flex; flex-direction: column; gap: 10px; flex-shrink: 0; }
        
        .controls { display: flex; gap: 10px; background: #252526; padding: 10px; border-radius: var(--border-radius); align-items: center; }
        .status-text { flex-grow: 1; font-weight: bold; color: #aaa; text-align: left; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .status-text span { color: var(--accent-blue); }
        
        input { padding: 10px; width: 80px; text-align: center; font-size: 16px; border-radius: 4px; border: 1px solid #555; background: #333; color: white; }
        button.guess-btn { padding: 10px 20px; font-size: 14px; font-weight: bold; background: var(--correct-green); color: white; border: none; border-radius: 4px; cursor: pointer; text-transform: uppercase; }
        button.guess-btn:disabled { background: #555; cursor: not-allowed; }

        .history-log { display: flex; flex-direction: column; gap: 5px; max-height: 80px; overflow-y: auto; }
        .history-row { display: flex; justify-content: space-between; background: #252526; padding: 8px 12px; border-radius: 4px; border-left: 5px solid var(--wrong-red); animation: slideIn 0.3s ease-out; font-size: 0.9rem; }
        .history-row.win { border-left-color: var(--correct-green); }
        .history-row.close { border-left-color: var(--partial-yellow); }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        #main-timer-box { display: none; text-align: center; background: #252526; padding: 8px; border-radius: 8px; border: 1px solid #444; }

        /* –ú–û–î–ê–õ–ö–ê */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        .modal-overlay.visible { opacity: 1; pointer-events: all; }
        .modal-content { background: #121213; padding: 30px; border-radius: 10px; text-align: center; border: 1px solid #444; width: 90%; max-width: 350px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); position: relative; }
        .modal-title { font-size: 1.5rem; margin-bottom: 10px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; color: white; }
        .modal-info { font-size: 1rem; color: #ccc; margin-bottom: 20px; line-height: 1.6; }
        .close-btn { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #666; font-size: 24px; cursor: pointer; font-weight: bold; }
        .close-btn:hover { color: white; }
        .stats-container { background: rgba(255, 255, 255, 0.05); padding: 10px; border-radius: 8px; margin: 15px 0; text-align: left; max-height: 150px; overflow-y: auto; }
        .stat-header { font-size: 0.9rem; font-weight: bold; margin-bottom: 5px; text-align: center; color: #aaa; }
        .mini-row { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid #333; font-size: 0.8rem; color: #ccc; }
        .mini-row:last-child { border-bottom: none; }
    </style>
</head>
<body>

    <header>
        <h1>üèõÔ∏è ELECTLE</h1>
        <p class="subtitle">
            Guess the <b>country</b> and <b>election year</b> based on the parliamentary seating diagram.<br>
            (Lower house only)
        </p>
    </header>

    <div class="top-section">
        <div class="diagram-container">
            <!-- referrerpolicy="no-referrer" –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å –í–∏–∫–∏–ø–µ–¥–∏–∏ -->
            <img id="diagram-img" src="" alt="Parliament Diagram" referrerpolicy="no-referrer">
        </div>
    </div>

    <div class="map-wrapper">
        <div class="zoom-controls">
            <button class="zoom-btn" onclick="panZoom.zoomIn()">+</button>
            <button class="zoom-btn" onclick="panZoom.zoomOut()">-</button>
            <button class="zoom-btn" onclick="panZoom.reset()">‚Ü∫</button>
        </div>

        <svg id="world-map" viewBox="0 0 2000 1000" xmlns="http://www.w3.org/2000/svg">
            <path id="DE" name="Germany" d="M1053.9 158.9l1.4 3.1-1.2 1.7 1.9 2.1 1.5 3.3-0.2 2.2 2.4 3.9-2.2 0.6-1.3-0.7-1.1 1.2-3.5 1.2-1.7 1.6-3.4 1.3 1 1.8 0.7 2.7 2.6 1.5 3 2.6-1.6 2.9-1.7 0.8 1 4.1-0.4 1.1-1.7-1.3-2.4-0.2-3.5 1.1-4.4-0.3-0.6 1.7-2.7-1.7-1.4 0.3-5.5-1.9-1 1.3-4.2 0 0.4-4.5 2.4-4.2-7.2-1.2-2.4-1.6 0.2-2.7-1-1.4 0.4-4.2-1.1-6.5 2.9 0 1.2-2.3 0.9-5.6-0.9-2.1 0.8-1.3 4-0.3 1 1.3 3.1-3-1.3-2.3-0.4-3.4 3.7 0.8 2.9-0.9 0.3 2.3 4.9 1.4 0.1 2.2 4.7-1.2 2.6-1.6 5.6 2.4 2.4 1.9z"></path>
            <path id="FR" name="France" d="M 1035.7 231.4 1034.2 236.3 1031.8 235 1030.5 230.8 1031.4 228.4 1034.6 226 1035.7 231.4 Z M 1014.4 185 1015.5 185.5 1016.9 185.4 1019.3 187 1026.5 188.2 1024.1 192.4 1023.7 196.9 1022.4 198 1020.1 197.4 1020.3 199 1016.7 202.5 1016.7 205.4 1019.1 204.4 1020.9 207.1 1020.8 208.9 1022.3 211.3 1020.6 213.2 1022.1 218.1 1024.9 218.9 1024.4 221.6 1019.9 225.2 1009.7 223.5 1002.3 225.6 1001.7 229.4 995.8 230.2 990 227.3 988.1 228.7 978.6 225.8 976.6 223.4 979.3 219.6 980.3 207 975.2 200.4 971.5 197.2 963.9 194.8 963.5 190.2 970 188.9 978.3 190.5 976.8 183.4 981.5 186.1 992.9 181.3 994.4 176.2 998.6 174.9 999.4 177.1 1001.6 177.2 1004 179.7 1007.5 182.6 1010 182.1 1014.4 185 Z"></path>
			<path id="RU" name="Russia" d="M 1689.5 177.4 1703.2 188.4 1694.3 186.4 1698 195.4 1707.6 201.8 1710.6 206.2 1704.1 202.4 1704.2 207.3 1699.5 202 1695.7 195.9 1690.1 189.2 1687.7 184.4 1681.3 176.2 1673.3 170.1 1666.5 161.7 1668.4 158.9 1664 156.1 1665.3 155.2 1670.2 159.2 1677.1 165.1 1682.3 171.2 1689.5 177.4 Z"></path>
			<path id="RU" name="Russia" d="M 1094.6 155.4 1085.8 155.5 1079.9 154.8 1080.6 152.2 1086.9 150.2 1092 151.3 1094.2 152.2 1094 153.9 1094.6 155.4 Z"></path>
			<path id="RU" name="Russia" d="M 1548.4 48.2 1542.5 48.3 1533.6 47.7 1532.6 47.4 1533.3 45.4 1537.5 44.9 1545.9 46.9 1548.4 48.2 Z"></path>
			<path id="RU" name="Russia" d="M 1561 38.7 1559.9 40.7 1553 40.3 1542.7 38.3 1540.9 36.7 1549.2 37.4 1561 38.7 Z"></path>
			<path id="RU" name="Russia" d="M 1535.5 36.3 1538.6 40.1 1524.3 39.9 1519.7 41.1 1507.2 37.8 1503.8 34.4 1507.3 33.5 1517.5 33.7 1535.5 36.3 Z"></path>
			<path id="RU" name="Russia" d="M 1218.8 61.3 1216.6 61.7 1203.1 61 1200.8 58.7 1192.9 57.3 1190.9 54.4 1194.4 53.3 1192.8 50.5 1198.2 46.1 1194.2 45.5 1200.9 41 1198.4 38.7 1205.2 36.1 1215.5 32.9 1227.2 32 1232.2 30.2 1238.9 29.6 1243.1 31.5 1241.8 33 1230.4 35.5 1220.5 37.8 1211.8 42.6 1209 47.6 1205.7 52.6 1208.8 56.9 1218.8 61.3 Z"></path>
			<path id="RU" name="Russia" d="M 1661.7 231 1660.3 229.9 1658.4 226.6 1660.9 226.5 1657 219 1652.3 213.6 1655.2 211.4 1662.1 212.5 1661.5 206.3 1658.7 199.5 1659 197.2 1657.7 191.5 1650.8 193.4 1648.2 195.8 1640.6 195.8 1634.6 190 1625.6 185.5 1615.6 183.5 1609.4 177.5 1604.9 173.7 1601.1 171 1593.4 164.8 1587.4 162.6 1578.8 160.7 1572.6 160.9 1567.5 162 1565.8 165.1 1569.5 166.5 1572 169.9 1570.7 171.9 1570.9 178.4 1572.8 181.2 1568.4 185.1 1561 182.7 1555.4 183.3 1551.5 181.2 1548.1 180.5 1543.7 184.9 1537.8 185.9 1534.2 187.5 1527.4 186.5 1522.8 186.5 1517.9 183.3 1511.3 180.4 1505.9 179.5 1500.2 180.3 1496.2 181.5 1487.7 178.9 1484.1 174.3 1477.4 172.7 1472.6 171.9 1465.6 169.4 1464.3 175.8 1468.3 179.4 1465.9 183.8 1457.9 182.2 1452.9 182 1448.1 179.1 1442.9 179 1437.6 177.1 1431.7 180 1425 185.3 1420.3 186.4 1418.6 186.9 1414.2 183.1 1408.2 184 1404.9 181.3 1400.9 180.1 1396.8 176.5 1393.5 175.4 1387.3 177 1378.9 173.5 1377.8 176.7 1359.5 161.1 1351.1 156.4 1351.9 154.4 1342.7 160.2 1338.3 160.5 1337.2 157.2 1330.1 155.1 1325.8 156.6 1321.4 150.3 1312.3 149 1309.2 151.5 1298.3 153.8 1296.6 155.3 1279.6 157.4 1278.2 159.5 1283.3 163.7 1279.3 165.3 1280.8 166.9 1277.3 169.9 1286.7 174.2 1286.5 177.1 1279.5 176.8 1278.7 178.7 1271.4 175.5 1263.7 175.6 1259.3 178.2 1252.7 175.7 1240.7 171.4 1233.1 171.6 1225 178.3 1225.6 182.8 1219.6 179.2 1217.4 186.1 1219.2 187.3 1217.5 192.1 1222.8 196.3 1226.4 196.1 1230.7 200.3 1230.9 203.5 1233.7 204.6 1232.3 208.3 1227.7 209.3 1224.1 215.8 1230.1 221.9 1230.5 226.1 1237.8 233.6 1235.3 236.2 1234.7 237.8 1232.3 237.3 1228 233.5 1226.5 233.3 1222.9 231.8 1220.8 229.2 1215.7 227.9 1212.8 228.9 1211.6 227.7 1204 224.6 1196.3 223.6 1191.7 222.5 1191.3 223.3 1183.7 217.9 1177.5 215.5 1172.4 211.8 1176 210.8 1179.2 205.6 1175.9 203.1 1182.8 200.5 1182.4 199.1 1178.1 200.1 1177.7 197.4 1179.9 195.6 1184.7 195.2 1185 193.1 1183.2 189.6 1184.5 186.4 1184.1 184.5 1176.4 182.5 1173.5 182.6 1169.9 179.7 1166.3 180.7 1159.6 178.5 1159.5 177.3 1157.2 174.6 1153.3 174.3 1152.5 172.4 1153.4 171.1 1149.6 167.6 1144.7 168.2 1143.2 167.9 1142.2 169.3 1140.4 169.1 1138.4 165.1 1136.9 163.1 1137.7 162.5 1141.6 162.7 1143.2 161.4 1141.5 159.8 1138.1 158.7 1138.1 157.6 1136 156.5 1132.2 152.5 1132.9 150.9 1131.8 148 1127 146.6 1124.6 147.3 1123.7 145.8 1118.4 144.3 1116.3 140.7 1115.3 137.8 1112.8 136.5 1114.4 134.6 1112 129 1114.6 125.6 1113.7 124.6 1118.2 121.3 1112.8 118.5 1120.8 111.1 1124.2 107.7 1125.1 104.8 1117.7 100.9 1118.6 97.1 1113.7 92.9 1115.4 88.1 1108.9 81.8 1111.8 77.6 1104.5 73.9 1104.1 70.1 1107.3 69.6 1113.7 67.5 1117.4 65.6 1125.1 68.8 1136.8 70.1 1154.5 76.3 1158.6 78.9 1160.1 82.6 1156.4 85.5 1149.9 87 1129.7 82.8 1126.8 83.5 1134.9 87.6 1135.9 90.2 1137.8 96 1143.9 97.7 1147.7 99.2 1147.5 96.4 1144.1 94 1146.2 91.8 1157.8 95.4 1161 94 1156.7 89.8 1164.8 84.4 1168.9 84.7 1173.5 86.6 1174.6 82.8 1169.9 79.5 1170.7 76.2 1166.4 72.8 1178.7 74.6 1182.3 77.6 1177.2 78.3 1178.4 81.4 1182.5 83.3 1188.5 82.1 1188.1 78.6 1195.8 75.9 1208.2 71.3 1211.4 71.5 1208.9 74.8 1214.3 75.4 1216.4 73.5 1224.1 73.4 1229.1 71.1 1235.5 74.4 1238.3 70.8 1232.3 67.7 1233.5 65.9 1246.5 67.5 1253.1 69.2 1271.7 75.4 1272.8 72.6 1266.9 69.7 1266.1 68.6 1260.8 68 1260.6 65.5 1255.9 61.3 1254.8 59.6 1259.1 54.9 1258.5 50.1 1260.7 49.1 1272.1 50.5 1275 53.4 1274.1 57.6 1277.8 59.3 1281.6 63 1285.4 70.4 1292.1 73.7 1292.6 77.4 1289.1 85.2 1294.4 86 1294.9 84 1298.7 82.6 1298.2 79.9 1300.1 77.2 1295.7 74.1 1295.3 70.5 1290.5 70.1 1287.6 67.1 1287.2 61.7 1279 57.4 1283.7 53.9 1280 50.2 1281.9 50.1 1286.1 52.9 1288.2 58 1293.2 59 1288.6 55.2 1293.7 53.1 1301.8 52.8 1311.4 55.8 1304.5 51.5 1299.6 46 1305.5 45 1315 45.2 1322.8 44.5 1317.2 41.9 1318.5 38.6 1322.7 38.4 1327.6 36 1336.9 35.3 1336.7 33.9 1346 33.5 1350.3 34.6 1355.7 32 1362.7 32.1 1361.2 29.9 1362.1 27.9 1368.3 25.9 1376.6 27.5 1373.1 28.7 1382.5 29.4 1386.6 31.8 1388.5 30.6 1399.4 30.7 1411 33.1 1416.5 34.9 1419 37.5 1416.6 39 1410 41.8 1408.9 43.3 1414.5 44 1421.7 45.3 1424.1 44.3 1429.9 47.6 1430.1 46.3 1435.3 45.5 1448.9 46.3 1452.7 48.7 1470.1 49.5 1465.3 45.6 1474.8 46.5 1480.9 46.4 1490.8 49.1 1496.8 52.4 1497.2 54.6 1507.3 58.8 1516.3 60.9 1513.3 55.4 1522.7 57.7 1527.7 56.3 1537.5 57.9 1538.5 56.5 1546.1 57.2 1536.7 52.3 1538.8 50.1 1579.2 53.5 1587.1 56.6 1603.4 60.6 1618.2 59.6 1627.5 60.5 1634.1 62.7 1639.2 66.6 1646.5 68.1 1650.4 67 1657.4 66.9 1666.7 67.9 1673.6 67.3 1687.9 72.1 1690.4 70.4 1681.9 67 1680.1 64.6 1695.4 66.1 1703.4 65.8 1719.2 68.3 1728.7 70.7 1761.9 92.8 1759.9 95.3 1753.7 94.9 1761.9 97.9 1771 102.6 1775.2 104.1 1779 106.5 1780 108 1770 106.8 1763.4 111.1 1760.4 111.8 1758.8 115.9 1756.8 119.5 1758.5 122.2 1747 118.1 1740.9 122.7 1736.2 120.5 1734.8 123.1 1727.8 122.2 1730.9 126.1 1732 131.9 1734.9 134.3 1741.7 135.6 1750.8 144.3 1746.7 144.6 1750.1 149.6 1754.8 152.2 1749.8 155.3 1755.2 162.3 1749.5 163.8 1754 170 1752.3 175.8 1746.6 171.5 1736.1 162.6 1719.9 149 1713.4 140.7 1713.5 137.1 1710.7 134.3 1716.4 133 1716.2 125.5 1716.9 119.5 1719.4 114.8 1712.8 106.6 1708.1 107.1 1711.3 111.9 1707.7 118.3 1695.4 111.1 1686.3 113.1 1686.3 122.9 1694 126.5 1685.5 128.1 1679.1 128.7 1674.8 124.4 1666.8 123.5 1664.3 126.4 1649.2 125.4 1636 127.1 1632.5 138.8 1627.5 153 1635.7 153.8 1641.4 157.6 1647.2 158.9 1647.6 155.9 1653.2 156.3 1666 163 1670.7 168.2 1672.1 174.4 1677.6 181.8 1682.9 191.7 1681.9 200.8 1683.2 205.1 1681.2 212.5 1679.1 219.8 1678.2 223.5 1673.6 227.2 1670.5 227.3 1665.3 224.2 1661.2 228.9 1661.7 231 Z"></path>
			<path id="RU" name="Russia" d="M 1367.1 23.1 1349 24.9 1347.7 18.8 1349.9 18.3 1353 18.6 1365.6 21.2 1367.1 23.1 Z"></path>
			<path id="RU" name="Russia" d="M 1164.8 13.1 1160.5 13.6 1157.6 14 1157.6 14.7 1154 15.4 1149.5 14.4 1150.6 13 1142.8 12.9 1149.1 12.1 1154.3 12.1 1155.8 13.2 1157.1 12.2 1159.9 11.5 1165.7 12.4 1164.8 13.1 Z"></path>
			<path id="RU" name="Russia" d="M 1345.1 20.4 1338 21 1326.3 19.7 1318.2 18 1311.6 14.8 1305.7 14 1311.1 11.1 1317.3 10.2 1326.9 12.2 1340.6 16.4 1345.1 20.4 Z"></path>
			<path id="IT" name="Italy" d="M 1068.2 256.4 1066.5 261.5 1067.4 263.4 1066.5 266.7 1062.3 264.3 1059.6 263.6 1052.1 260.4 1052.6 257.1 1058.8 257.7 1064.2 257 1068.2 256.4 Z"></path>
			<path id="IT" name="Italy" d="M 1034.2 237.4 1037.5 241.9 1037.1 250.4 1034.7 250 1032.6 252.1 1030.6 250.4 1030.1 242.7 1028.8 239.1 1031.7 239.4 1034.2 237.4 Z"></path>
			<path id="IT" name="Italy" d="M 1055.9 203.9 1055.5 207 1056.9 209.7 1052.8 208.7 1048.9 211 1049.3 214.1 1048.8 215.9 1050.7 219.1 1055.7 222.3 1058.6 227.6 1064.7 232.7 1068.7 232.6 1070.1 234 1068.7 235.3 1073.5 237.6 1077.5 239.5 1082.2 242.9 1082.8 244 1082 246.3 1078.9 243.3 1074.3 242.3 1072.4 246.4 1076.3 248.8 1075.9 252.1 1073.8 252.5 1071.3 258 1069.1 258.5 1069 256.5 1069.9 253.1 1071 251.7 1068.7 248 1066.9 244.8 1064.7 244 1062.9 241.3 1059.5 240.1 1057.1 237.5 1053.3 237.1 1049 234.3 1044.1 230.1 1040.4 226.5 1038.5 220.2 1035.9 219.5 1031.7 217.4 1029.4 218.2 1026.5 221.2 1024.4 221.6 1024.9 218.9 1022.1 218.1 1020.6 213.2 1022.3 211.3 1020.8 208.9 1020.9 207.1 1023.1 208.5 1025.6 208.2 1028.3 206 1029.2 207 1031.6 206.8 1032.6 204.3 1036.4 205.1 1038.5 204 1038.8 201.5 1041.9 202.4 1042.4 201.2 1047.3 200.1 1048.6 202.2 1055.9 203.9 Z"></path>
        </svg>
    </div>

    <div class="bottom-section">
        <div class="controls">
            <div class="status-text" id="selected-display">Selected: <span>‚Äî</span></div>
            <input type="number" id="year-input" placeholder="Year" value="">
            <button class="guess-btn" id="submit-btn" onclick="makeGuess()">GUESS</button>
        </div>
        <div class="history-log" id="history"></div>
        
        <div id="main-timer-box">
            <span style="color: #888; font-size: 0.8em;">NEXT PARLIAMENT IN:</span><br>
            <span class="countdown-text" style="font-size: 1.1em; font-weight: bold; font-family: monospace;">00:00:00</span>
        </div>
    </div>

    <!-- WIN MODAL -->
    <div id="win-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">‚úï</button>
            <div class="modal-title">üéâ VICTORY!</div>
            <div class="modal-info">
                You identified <b style="color:var(--accent-blue)" id="win-country-name"></b><br>
                Election Year: <b style="color:var(--correct-green)" id="win-year-val"></b>
            </div>
            <div class="stats-container">
                <div class="stat-header">Attempts: <span id="attempt-count">0</span></div>
                <div id="win-history-list"></div>
            </div>
            <div style="font-size: 0.8em; text-transform: uppercase; color: #888; margin-top: 15px;">Next Game In</div>
            <div class="countdown-text" style="font-size: 1.5rem; font-weight: bold; font-family: monospace; margin-top: 5px;">00:00:00</div>
        </div>
    </div>

    <!-- DEV TOOLS -->
    <div style="margin-top: 20px; margin-bottom: 20px; opacity: 0.3; text-align: center; font-size: 10px;">
        <button onclick="devResetDaily()" style="cursor: pointer;">üîÑ Dev: Reset</button>
        <button onclick="devPlayRandom()" style="cursor: pointer;">üé≤ Dev: Random</button>
    </div>

    <script>
        const database = [
			{
                "id": "de",
                "country": "Germany",
                "year": 1912,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Alemania_Reichstag_1912.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1912_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1919,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_1919.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1919_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1920,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_1920.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1920_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1924,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_Dec_1924.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/December_1924_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1928,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_1928.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1928_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1930,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_1930.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1930_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1930,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_1930.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1930_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1932,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Reichstag_Nov_1932.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/November_1932_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1933,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Reichstag_composition,_March_1933.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/March_1933_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1936,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/German_Reichstag,_1936.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1936_German_parliamentary_election_and_referendum"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1938,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/German_Reichstag_1938.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1938_German_parliamentary_election_and_referendum"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1949,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_composition_1949.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1949_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1953,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/1953_German_federal_election_-_composition_chart.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1953_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1957,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1957.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1957_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1961,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1961.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1961_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1965,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1965.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1965_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1969,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1969.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1969_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1972,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1972.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1972_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1976,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1976.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1976_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1980,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1980.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1980_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1983,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1983.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1983_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1987,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1987.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1987_West_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1990,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1990.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1990_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1994,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_1994.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1994_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 1998,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Bundestag_1998.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1998_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 2002,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Germany_Bundestag_2002.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2002_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 2005,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_elected_members,_2005.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2005_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 2009,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/2009_German_federal_election_-_composition_chart.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2009_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 2013,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Deutschland_Bundestag_2013.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2013_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 2017,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_2017.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2017_German_federal_election"
            },
            {
                "id": "de",
                "country": "Germany",
                "year": 2021,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Bundestag_2021.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2021_German_federal_election"
            },
			{
                "id": "de",
                "country": "Germany",
                "year": 2025,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/21st_Bundestag.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2025_German_federal_election"
            },
			
            {
                "id": "fr",
                "country": "France",
                "year": 2022,
                "region": "Western Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/National_Assembly_2022.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2022_French_legislative_election"
            },
			
			{
                "id": "ru",
                "country": "Russia",
                "year": 2021,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russia_State_Duma_2021.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2021_Russian_legislative_election#Results"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 2016,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/State_Duma_election_2016.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2016_Russian_legislative_election#Results"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 2011,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russian_6th_State_Duma.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2011_Russian_legislative_election#Results"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 2007,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russian_State_Duma_2007-2011.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2007_Russian_legislative_election#Results"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 2003,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russian_State_Duma_2003.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/2003_Russian_legislative_election#Results"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 1999,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russian_State_Duma_1999-2003.svg?width=600",
                "wikilink": "https://ru.wikipedia.org/wiki/–í—ã–±–æ—Ä—ã–≤–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é–¥—É–º—É_(1999)#–†–µ–∑—É–ª—å—Ç–∞—Ç—ã"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 1995,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russia_State_Duma_1995.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1995_Russian_legislative_election#Results"
            },
			{
                "id": "ru",
                "country": "Russia",
                "year": 1993,
                "region": "Eastern Europe",
                "img": "https://commons.wikimedia.org/wiki/Special:FilePath/Russia_State_Duma_1993.svg?width=600",
                "wiki_link": "https://en.wikipedia.org/wiki/1993_Russian_legislative_election#Results"
            },
        ];

        const regionMap = {
            "Western Europe": ["DE", "FR", "IT"],
            "Eastern Europe": ["RU"],
        };

        // --- 2. –õ–û–ì–ò–ö–ê ---
        function getDailyTarget() {
            const epoch = new Date("2024-01-01");
            const today = new Date();
            const diffTime = Math.abs(today - epoch);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)); 
            const index = diffDays % database.length;
            return database[index];
        }

        let target = getDailyTarget();
        let selectedId = null;
        let selectedName = null;
        let panZoom = null;
        let gameActive = true;

        function getRegionByCountryId(id) {
            const upperId = id.toUpperCase(); 
            for (const [region, countries] of Object.entries(regionMap)) {
                if (countries.includes(upperId)) return region;
            }
            return null;
        }

        window.onload = function() {
            const todayStr = new Date().toISOString().split('T')[0];
            const lastWon = localStorage.getItem('electle_last_won');

            if (lastWon === todayStr) {
                gameActive = false;
                showWinModal(true);
                document.getElementById('main-timer-box').style.display = 'block'; 
            }

            panZoom = svgPanZoom('#world-map', {
                zoomEnabled: true, 
                controlIconsEnabled: false, 
                fit: true, 
                center: true, 
                minZoom: 1, 
                maxZoom: 20,
                preventMouseEventsDefault: false 
            });

            document.getElementById('diagram-img').src = target.img;

            // --- –§–ò–ö–° –î–õ–Ø –û–°–¢–†–û–í–û–í –ò –ú–£–õ–¨–¢–ò-–ö–£–°–û–ß–ö–û–í ---
            const paths = document.querySelectorAll('path');
            
            function handleCountrySelect(el) {
                if (!gameActive) return;
                if (el.classList.contains('correct') || el.classList.contains('wrong')) return;
                
                // 1. –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –í–°–ï–• –∫—É—Å–æ—á–∫–æ–≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω—ã
                if (selectedId) {
                    const oldPieces = document.querySelectorAll(`path[id="${selectedId}"]`);
                    oldPieces.forEach(piece => {
                        // –ù–µ —É–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ —É–∂–µ –ø–æ–∫—Ä–∞—à–µ–Ω–æ –≤ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π/–∑–µ–ª–µ–Ω—ã–π
                        if(!piece.classList.contains('regional') && !piece.classList.contains('correct')) {
                            piece.classList.remove('selected');
                        }
                    });
                }
                
                // 2. –í—ã–¥–µ–ª—è–µ–º –í–°–ï –∫—É—Å–æ—á–∫–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω—ã
                selectedId = el.id;
                selectedName = el.getAttribute('name') || el.id;
                
                // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ path —Å —Ç–∞–∫–∏–º –∂–µ ID (–¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç—ã)
                const newPieces = document.querySelectorAll(`path[id="${selectedId}"]`);
                newPieces.forEach(piece => piece.classList.add('selected'));

                document.getElementById('selected-display').innerHTML = `Selected: <span>${selectedName}</span>`;
            }

            // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            paths.forEach(p => {
                p.addEventListener('click', () => handleCountrySelect(p));

                let startX, startY;
                p.addEventListener('touchstart', (e) => {
                    if (e.touches.length > 1) return; 
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                }, { passive: true });

                p.addEventListener('touchend', (e) => {
                    if (!startX || !startY) return;
                    const endX = e.changedTouches[0].clientX;
                    const endY = e.changedTouches[0].clientY;
                    if (Math.abs(endX - startX) < 10 && Math.abs(endY - startY) < 10) {
                        e.preventDefault(); 
                        handleCountrySelect(p);
                    }
                    startX = null; startY = null;
                });
            });

            setInterval(updateCountdown, 1000);
            updateCountdown();
        };


                function makeGuess() {
            if (!gameActive) return;

            const yearInput = document.getElementById('year-input');
            const statusText = document.getElementById('selected-display');
            const userYear = parseInt(yearInput.value);

            if (!selectedId) { statusText.innerHTML = "<span style='color:#ff5555'>‚ö† Select a country!</span>"; return; }
            if (!userYear) { statusText.innerHTML = "<span style='color:#ff5555'>‚ö† Enter year!</span>"; return; }

            // –ù–∞—Ö–æ–¥–∏–º –í–°–ï –∫—É—Å–æ—á–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã
            const mapEls = document.querySelectorAll(`path[id="${selectedId}"]`);
            const userRegion = getRegionByCountryId(selectedId);
            
            const isCountryCorrect = (selectedId.toLowerCase() === target.id.toLowerCase());
            const isRegionCorrect = (userRegion === target.region);
            const yearDiff = Math.abs(userYear - target.year);

            // –°–Ω–∏–º–∞–µ–º —Å–∏–Ω—é—é –æ–±–≤–æ–¥–∫—É —Å–æ –≤—Å–µ—Ö –∫—É—Å–∫–æ–≤
            mapEls.forEach(el => el.classList.remove('selected'));

            if (isCountryCorrect) {
                // –ö—Ä–∞—Å–∏–º –í–°–ï –∫—É—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã –≤ –∑–µ–ª–µ–Ω—ã–π
                mapEls.forEach(el => el.classList.add('correct'));
            } else if (isRegionCorrect) {
                const regionCountries = regionMap[target.region];
                if (regionCountries) {
                    regionCountries.forEach(countryId => {
                        // –ò—â–µ–º –≤—Å–µ –∫—É—Å–∫–∏ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã —Ä–µ–≥–∏–æ–Ω–∞
                        const regionEls = document.querySelectorAll(`path[id="${countryId}"]`); 
                        regionEls.forEach(el => {
                            if (el.id !== selectedId && !el.classList.contains('correct')) {
                                el.classList.add('regional');
                            }
                        });
                    });
                }
                // –°–∞–º—É –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫—Ä–∞—Å–∏–º –≤ —Å–µ—Ä—ã–π (–≤—Å–µ –∫—É—Å–∫–∏)
                mapEls.forEach(el => el.classList.add('wrong'));
            } else {
                // –°–∞–º—É –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫—Ä–∞—Å–∏–º –≤ —Å–µ—Ä—ã–π (–≤—Å–µ –∫—É—Å–∫–∏)
                mapEls.forEach(el => el.classList.add('wrong'));
            }

            // –ò—Å—Ç–æ—Ä–∏—è
            let yearIcon = yearDiff === 0 ? "‚úÖ" : (userYear < target.year ? "‚Üë" : "‚Üì");
            let rowClass = "history-row";
            if (isCountryCorrect && yearDiff === 0) rowClass += " win";
            else if (isCountryCorrect || isRegionCorrect) rowClass += " close";

            let icon = isCountryCorrect ? "üåç‚úÖ" : (isRegionCorrect ? "üåçüü°" : "üåç‚ùå");

            const historyLog = document.getElementById('history');
            const row = document.createElement('div');
            row.className = rowClass;
            row.innerHTML = `<div>${selectedName}</div><div>${icon} | ${userYear} ${yearIcon}</div>`;
            historyLog.prepend(row);

            // –ü–æ–±–µ–¥–∞?
            if (isCountryCorrect && yearDiff === 0) {
                gameActive = false;
                statusText.innerHTML = "<span style='color:#538d4e'>VICTORY!</span>";
                localStorage.setItem('electle_last_won', new Date().toISOString().split('T')[0]);
                document.getElementById('main-timer-box').style.display = 'block'; 
                setTimeout(() => showWinModal(false), 1500);
            } else if (isCountryCorrect) {
                statusText.innerHTML = `<span style='color:#538d4e'>Correct Country! Fix the Year (${userYear} ${yearIcon})</span>`;
                yearInput.select();
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∏–≥—Ä–æ–∫ –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∞ –≤—Å—ë –µ—â–µ –≤ —Ñ–æ–∫—É—Å–µ
                mapEls.forEach(el => el.classList.add('selected')); 
            } else {
                selectedId = null;
                statusText.innerHTML = "Selected: <span>‚Äî</span>";
                yearInput.value = "";
            }
        }


        function showWinModal(instant) {
            document.getElementById('win-country-name').innerText = target.country;
            document.getElementById('win-year-val').innerText = target.year;
            document.getElementById('submit-btn').disabled = true;
            document.getElementById('year-input').disabled = true;

            const historyRows = document.querySelectorAll('.history-row');
            document.getElementById('attempt-count').innerText = historyRows.length;
            const listContainer = document.getElementById('win-history-list');
            listContainer.innerHTML = '';
            
            for (let i = 0; i < historyRows.length; i++) {
                const miniRow = document.createElement('div');
                miniRow.className = 'mini-row';
                miniRow.innerHTML = historyRows[i].innerHTML;
                listContainer.appendChild(miniRow);
            }
            
            const modal = document.getElementById('win-modal');
            modal.classList.add('visible');
            if(instant) modal.style.transition = 'none';
        }

        function closeModal() {
            document.getElementById('win-modal').classList.remove('visible');
        }

        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            const diff = tomorrow - now;
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            const timeStr = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            document.querySelectorAll('.countdown-text').forEach(t => t.innerText = timeStr);
        }

        function devResetDaily() {
            localStorage.removeItem('electle_last_won');
            location.reload();
        }
        function devPlayRandom() {
            const randomIndex = Math.floor(Math.random() * database.length);
            target = database[randomIndex];
            resetGameState();
            console.log("TEST MODE:", target);
            document.getElementById('selected-display').innerHTML = "<span style='color:orange'>‚ö† TEST: " + target.country + "_" +target.year + "</span>";
        }
        function resetGameState() {
            gameActive = true; selectedId = null;
            document.querySelectorAll('path').forEach(p => p.classList.remove('correct', 'wrong', 'regional', 'selected'));
            document.getElementById('diagram-img').src = target.img;
            document.getElementById('year-input').value = ''; document.getElementById('year-input').disabled = false;
            document.getElementById('submit-btn').disabled = false;
            document.getElementById('history').innerHTML = '';
            document.getElementById('win-modal').classList.remove('visible');
            document.getElementById('main-timer-box').style.display = 'none';
            if(panZoom) panZoom.reset();
        }
    </script>
</body>
</html>
