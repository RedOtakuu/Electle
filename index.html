<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electle - Daily Parliament Game</title>
    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
    
    <style>
        :root {
            --bg-color: #1a1a1b;
            --ocean-color: #2c2c2e;
            --text-color: #ffffff;
            --accent-blue: #4a90e2;
            --correct-green: #538d4e;
            --partial-yellow: #b59f3b;
            --wrong-red: #3a3a3c;
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header { padding: 15px; font-weight: bold; font-size: 1.5rem; letter-spacing: 2px; border-bottom: 1px solid #333; width: 100%; text-align: center; }

        /* TOP SECTION */
        .top-section { margin-top: 20px; width: 100%; max-width: 800px; display: flex; justify-content: center; }
        .diagram-container {
            background: white; padding: 10px; border-radius: var(--border-radius); height: 200px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .diagram-container img { max-height: 100%; max-width: 100%; object-fit: contain; }

        /* MAP SECTION */
        .map-wrapper {
            width: 95%; max-width: 900px; height: 450px;
            background-color: var(--ocean-color); border: 1px solid #444;
            border-radius: var(--border-radius); position: relative; overflow: hidden; margin-top: 20px;
        }
        svg { width: 100%; height: 100%; cursor: grab; }
        svg:active { cursor: grabbing; }

        path { fill: #d3d3d3; stroke: #111; stroke-width: 0.5px; transition: fill 0.3s; cursor: pointer; }
        path:hover { fill: #bbb; }
        path.selected { fill: var(--accent-blue) !important; }
        path.correct { fill: var(--correct-green) !important; }
        path.wrong { fill: var(--wrong-red) !important; opacity: 0.4; }
        path.regional { fill: var(--partial-yellow) !important; opacity: 0.8; }

        .zoom-controls { position: absolute; bottom: 10px; right: 10px; display: flex; flex-direction: column; gap: 5px; }
        .zoom-btn { width: 30px; height: 30px; background: rgba(0,0,0,0.6); color: white; border: 1px solid #555; border-radius: 4px; cursor: pointer; font-size: 18px; display:flex; justify-content:center; align-items:center; }

        /* CONTROLS SECTION */
        .bottom-section { width: 95%; max-width: 600px; padding: 20px 0; display: flex; flex-direction: column; gap: 15px; }
        .controls { display: flex; gap: 10px; background: #252526; padding: 15px; border-radius: var(--border-radius); align-items: center; }
        .status-text { flex-grow: 1; font-weight: bold; color: #aaa; text-align: left; font-size: 0.9rem; }
        .status-text span { color: var(--accent-blue); }
        input { padding: 10px; width: 80px; text-align: center; font-size: 16px; border-radius: 4px; border: 1px solid #555; background: #333; color: white; }
        button.guess-btn { padding: 10px 25px; font-size: 14px; font-weight: bold; background: var(--correct-green); color: white; border: none; border-radius: 4px; cursor: pointer; text-transform: uppercase; }
        button.guess-btn:disabled { background: #555; cursor: not-allowed; }

        /* HISTORY */
        .history-row { display: flex; justify-content: space-between; background: #252526; padding: 10px; border-radius: 4px; border-left: 5px solid var(--wrong-red); margin-bottom: 5px; animation: slideIn 0.3s ease-out; font-size: 0.9rem; }
        .history-row.win { border-left-color: var(--correct-green); }
        .history-row.close { border-left-color: var(--partial-yellow); }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        /* MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal-overlay.visible { opacity: 1; pointer-events: all; }
        .modal-content {
            background: #121213; padding: 40px; border-radius: 10px; text-align: center;
            border: 1px solid #444; max-width: 90%; width: 350px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        .modal-title { font-size: 1.5rem; margin-bottom: 15px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .modal-info { font-size: 1rem; color: #ccc; margin-bottom: 25px; line-height: 1.6; }
        .countdown { font-size: 1.5rem; font-weight: bold; font-family: monospace; margin-top: 10px; display: block; }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ */
		.stats-container {
			background: rgba(255, 255, 255, 0.05);
			padding: 15px;
			border-radius: 8px;
			margin: 15px 0;
			text-align: left;
			max-height: 200px;
			overflow-y: auto; /* –°–∫—Ä–æ–ª–ª, –µ—Å–ª–∏ –ø–æ–ø—ã—Ç–æ–∫ –º–Ω–æ–≥–æ */
		}

		.stat-header {
			font-size: 1.1rem;
			font-weight: bold;
			margin-bottom: 10px;
			text-align: center;
			color: var(--text-color);
		}

		/* –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç—Ä–æ–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ */
		.mini-row {
			display: flex;
			justify-content: space-between;
			padding: 5px 10px;
			border-bottom: 1px solid #333;
			font-size: 0.85rem;
			color: #ccc;
		}
		.mini-row:last-child { border-bottom: none; }
		.close-btn {
			position: absolute;
			top: 10px;
			right: 15px;
			background: transparent;
			border: none;
			color: #666;
			font-size: 24px;
			cursor: pointer;
			font-weight: bold;
		}
		.close-btn:hover { color: white; }
    </style>
</head>
<body>

    <header>ELECTLE</header>

    <div class="top-section">
        <div class="diagram-container">
            <img id="diagram-img" src="" alt="Parliament Diagram">
        </div>
    </div>

    <div class="map-wrapper">
        <div class="zoom-controls">
            <button class="zoom-btn" onclick="panZoom.zoomIn()">+</button>
            <button class="zoom-btn" onclick="panZoom.zoomOut()">-</button>
            <button class="zoom-btn" onclick="panZoom.reset()">‚Ü∫</button>
        </div>

        <svg id="world-map" viewBox="0 0 2000 857" xmlns="http://www.w3.org/2000/svg">
            <!-- –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–Æ –ö–ê–†–¢–£ –ü–û–õ–ù–û–°–¢–¨–Æ! -->
            <path id="DE" name="Germany" d="M1053.9 158.9l1.4 3.1-1.2 1.7 1.9 2.1 1.5 3.3-0.2 2.2 2.4 3.9-2.2 0.6-1.3-0.7-1.1 1.2-3.5 1.2-1.7 1.6-3.4 1.3 1 1.8 0.7 2.7 2.6 1.5 3 2.6-1.6 2.9-1.7 0.8 1 4.1-0.4 1.1-1.7-1.3-2.4-0.2-3.5 1.1-4.4-0.3-0.6 1.7-2.7-1.7-1.4 0.3-5.5-1.9-1 1.3-4.2 0 0.4-4.5 2.4-4.2-7.2-1.2-2.4-1.6 0.2-2.7-1-1.4 0.4-4.2-1.1-6.5 2.9 0 1.2-2.3 0.9-5.6-0.9-2.1 0.8-1.3 4-0.3 1 1.3 3.1-3-1.3-2.3-0.4-3.4 3.7 0.8 2.9-0.9 0.3 2.3 4.9 1.4 0.1 2.2 4.7-1.2 2.6-1.6 5.6 2.4 2.4 1.9z"></path>
            <path id="FR" name="France" d="M 1035.7 231.4 1034.2 236.3 1031.8 235 1030.5 230.8 1031.4 228.4 1034.6 226 1035.7 231.4 Z M 1014.4 185 1015.5 185.5 1016.9 185.4 1019.3 187 1026.5 188.2 1024.1 192.4 1023.7 196.9 1022.4 198 1020.1 197.4 1020.3 199 1016.7 202.5 1016.7 205.4 1019.1 204.4 1020.9 207.1 1020.8 208.9 1022.3 211.3 1020.6 213.2 1022.1 218.1 1024.9 218.9 1024.4 221.6 1019.9 225.2 1009.7 223.5 1002.3 225.6 1001.7 229.4 995.8 230.2 990 227.3 988.1 228.7 978.6 225.8 976.6 223.4 979.3 219.6 980.3 207 975.2 200.4 971.5 197.2 963.9 194.8 963.5 190.2 970 188.9 978.3 190.5 976.8 183.4 981.5 186.1 992.9 181.3 994.4 176.2 998.6 174.9 999.4 177.1 1001.6 177.2 1004 179.7 1007.5 182.6 1010 182.1 1014.4 185 Z"></path>
            <!-- ... -->
        </svg>
    </div>

    <div class="bottom-section">
        <div class="controls">
            <div class="status-text" id="selected-display">Selected: <span>‚Äî</span></div>
            <input type="number" id="year-input" placeholder="Year" value="">
            <button class="guess-btn" id="submit-btn" onclick="makeGuess()">GUESS</button>
        </div>
        <div class="history-log" id="history"></div>
    </div>
	
	<!-- –¢–∞–π–º–µ—Ä –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã) -->
	<div id="main-timer-box" style="display: none; text-align: center; margin-top: 10px; background: #333; padding: 10px; border-radius: 8px;">
		<span style="color: #888; font-size: 0.9em;">NEXT PARLIAMENT IN:</span><br>
		<span class="countdown-text" style="font-size: 1.2em; font-weight: bold; font-family: monospace;">00:00:00</span>
	</div>


    <!-- WIN MODAL -->
	<div id="win-modal" class="modal-overlay">
		<div class="modal-content">
			<!-- –í–û–¢ –≠–¢–ê –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê: -->
			<button class="close-btn" onclick="closeModal()">‚úï</button>

			<div class="modal-info">
				You identified <b style="color:var(--accent-blue)" id="win-country-name"></b><br>
				Election Year: <b style="color:var(--correct-green)" id="win-year-val"></b>
			</div>

			<!-- –°—é–¥–∞ –≤—Å—Ç–∞–≤–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
			<div class="stats-container">
				<div class="stat-header"> attempts: <span id="attempt-count">0</span></div>
				<div id="win-history-list"></div>
			</div>

			<div style="font-size: 0.8em; text-transform: uppercase; color: #888; margin-top: 15px;">Next Game In</div>

			<div class="countdown-text" style="font-size: 1.5rem; font-weight: bold; font-family: monospace; margin-top: 10px;">00:00:00</div>

		</div>
	</div>


    <script>
        // --- 1. GAME DATABASE (–î–æ–±–∞–≤—å —Å—é–¥–∞ —Å–æ—Ç–Ω–∏ —Å—Ç—Ä–∞–Ω!) ---
        const database = [
			{
				"id": "de",
				"country": "Germany",
				"year": 2021,
				"region": "Europe",
				"img": "https://commons.wikimedia.org/wiki/Special:FilePath/20th_Bundestag_of_Germany.svg?width=800",
				"wiki_link": "https://en.wikipedia.org/wiki/2021_German_federal_election"
			},
			{
				"id": "fr",
				"country": "France",
				"year": 2022,
				"region": "Europe",
				"img": "https://commons.wikimedia.org/wiki/Special:FilePath/National_Assembly_of_France_2022.svg?width=800",
				"wiki_link": "https://en.wikipedia.org/wiki/2022_French_legislative_election"
			}
        ];

        // Region Mapping
        const regionMap = {
            "Europe": ["DE", "FR", "IT", "ES", "GB", "PL", "UA", "RU", "SE", "NO", "FI"],
            "South America": ["BR", "AR", "PE", "CO", "VE", "CL"],
            "North America": ["US", "CA", "MX"],
            "Asia": ["CN", "JP", "IN", "KR", "ID"],
            "Africa": ["EG", "ZA", "NG", "KE"],
            "Oceania": ["AU", "NZ"]
        };

        // --- 2. DAILY LOGIC ---
        function getDailyTarget() {
            // –ù–∞—á–∞–ª–æ —ç–ø–æ—Ö–∏ (–¥–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã)
            const epoch = new Date("2024-01-01");
            const today = new Date();
            const diffTime = Math.abs(today - epoch);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)); 
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å—Ç—Ä–∞–Ω—É –ø–æ –∫—Ä—É–≥—É: –î–µ–Ω—å 1 -> –ò–Ω–¥–µ–∫—Å 1, –î–µ–Ω—å 100 -> –ò–Ω–¥–µ–∫—Å 100
            // % database.length –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—á–∏—Ç—Å—è, –æ–Ω –Ω–∞—á–Ω–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞
            const index = diffDays % database.length;
            return database[index];
        }

        let target = getDailyTarget();
        let selectedId = null;
        let selectedName = null;
        let panZoom = null;
        let gameActive = true;

        // --- 3. INIT ---
        window.onload = function() {
            // Check if already won today
            const todayStr = new Date().toISOString().split('T')[0];
            const lastWon = localStorage.getItem('electle_last_won');

            if (lastWon === todayStr) {
                gameActive = false;
                showWinModal(true); // Show immediately without animation
            }
			document.getElementById('main-timer-box').style.display = 'block';
            // Setup Map
            panZoom = svgPanZoom('#world-map', {
                zoomEnabled: true, controlIconsEnabled: false, fit: true, center: true, minZoom: 1, maxZoom: 20
            });

            // Setup Diagram
            document.getElementById('diagram-img').src = target.img;

            // Setup Map Clicks
            const paths = document.querySelectorAll('path');
            paths.forEach(p => {
                p.addEventListener('click', () => {
                    if (!gameActive) return;
                    if (p.classList.contains('correct') || p.classList.contains('wrong')) return;
                    
                    if (selectedId) {
                        const old = document.getElementById(selectedId);
                        if(old && !old.classList.contains('regional') && !old.classList.contains('correct')) {
                            old.classList.remove('selected');
                        }
                    }
                    
                    p.classList.add('selected');
                    selectedId = p.id;
                    selectedName = p.getAttribute('name') || p.id;
                    document.getElementById('selected-display').innerHTML = `Selected: <span>${selectedName}</span>`;
                });
            });

            // Start Countdown
            setInterval(updateCountdown, 1000);
            updateCountdown();
        };

        function getRegionByCountryId(id) {
            for (const [region, countries] of Object.entries(regionMap)) {
                if (countries.includes(id)) return region;
            }
            return null;
        }

        // --- 4. GUESS LOGIC ---
        function makeGuess() {
			if (!gameActive) return;

			const yearInput = document.getElementById('year-input');
			const statusText = document.getElementById('selected-display');
			const userYear = parseInt(yearInput.value);

			if (!selectedId) { 
				statusText.innerHTML = "<span style='color:#ff5555'>‚ö† Select a country first!</span>"; 
				return; 
			}
			if (!userYear) { 
				statusText.innerHTML = "<span style='color:#ff5555'>‚ö† Enter a year!</span>"; 
				return; 
			}

			const mapEl = document.getElementById(selectedId);
			const userRegion = getRegionByCountryId(selectedId);
			
			const isCountryCorrect = (selectedId === target.id);
			const isRegionCorrect = (userRegion === target.region);
			const yearDiff = Math.abs(userYear - target.year);

			// 1. –ö–†–ê–°–ò–ú –ö–ê–†–¢–£
			mapEl.classList.remove('selected');

			if (isCountryCorrect) {
				mapEl.classList.add('correct'); // –ó–µ–ª–µ–Ω—ã–π –Ω–∞–≤—Å–µ–≥–¥–∞
			} else if (isRegionCorrect) {
				// –ö—Ä–∞—Å–∏–º –≤–µ—Å—å —Ä–µ–≥–∏–æ–Ω –≤ –∂–µ–ª—Ç—ã–π
				const regionCountries = regionMap[target.region];
				if (regionCountries) {
					regionCountries.forEach(countryId => {
						const el = document.getElementById(countryId);
						if (el && el.id !== selectedId && !el.classList.contains('correct')) {
							el.classList.add('regional');
						}
					});
				}
				mapEl.classList.add('wrong');
			} else {
				mapEl.classList.add('wrong');
			}

			// 2. –î–û–ë–ê–í–õ–Ø–ï–ú –í –ò–°–¢–û–†–ò–Æ
			let yearIcon = yearDiff === 0 ? "‚úÖ" : (userYear < target.year ? "‚Üë" : "‚Üì");
			
			let rowClass = "history-row";
			if (isCountryCorrect && yearDiff === 0) rowClass += " win";
			else if (isCountryCorrect || isRegionCorrect) rowClass += " close";

			let icon = isCountryCorrect ? "üåç‚úÖ" : (isRegionCorrect ? "üåçüü°" : "üåç‚ùå");

			const historyLog = document.getElementById('history');
			const row = document.createElement('div');
			row.className = rowClass;
			row.innerHTML = `
				<div>${selectedName}</div>
				<div>${icon} | ${userYear} ${yearIcon}</div>
			`;
			historyLog.prepend(row);

			// 3. –ü–†–û–í–ï–†–ö–ê –°–û–°–¢–û–Ø–ù–ò–Ø
			if (isCountryCorrect && yearDiff === 0) {
				// –ü–û–ë–ï–î–ê
				gameActive = false;
				statusText.innerHTML = "<span style='color:#538d4e'>VICTORY!</span>";
				localStorage.setItem('electle_last_won', new Date().toISOString().split('T')[0]);
				setTimeout(() => showWinModal(false), 1500);

			} else if (isCountryCorrect) {
				// –ü–û–õ–£-–ü–û–ë–ï–î–ê (–°—Ç—Ä–∞–Ω–∞ –≤–µ—Ä–Ω–∞—è, –≥–æ–¥ –Ω–µ—Ç)
				// –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º selectedId, —á—Ç–æ–±—ã –∏–≥—Ä–æ–∫ –º–æ–≥ —Å—Ä–∞–∑—É –ø–æ–º–µ–Ω—è—Ç—å –≥–æ–¥
				// –í–∏–∑—É–∞–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º "–≤—ã–¥–µ–ª–µ–Ω–∏–µ" (—Å–∏–Ω–∏–π), –Ω–æ –ø–æ–≤–µ—Ä—Ö –∑–µ–ª–µ–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –≤–∏–¥–Ω–æ,
				// –ø–æ—ç—Ç–æ–º—É –ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ —Ç–µ–∫—Å—Ç:
				statusText.innerHTML = `<span style='color:#538d4e'>Correct Country! Now fix the Year (${userYear} ${yearIcon})</span>`;
				// –§–æ–∫—É—Å –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –ø–µ—á–∞—Ç–∞—Ç—å
				yearInput.select(); 
				
			} else {
				// –ú–ò–ú–û
				selectedId = null;
				statusText.innerHTML = "Selected: <span>‚Äî</span>";
				yearInput.value = ""; // –û—á–∏—â–∞–µ–º –≥–æ–¥ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∞ –Ω–µ–≤–µ—Ä–Ω–∞—è
			}
		}



        function showWinModal(instant) {
			// –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ñ–æ
			document.getElementById('win-country-name').innerText = target.country;
			document.getElementById('win-year-val').innerText = target.year;
			document.getElementById('submit-btn').disabled = true;
			document.getElementById('year-input').disabled = true;

			// –°–ë–û–† –°–¢–ê–¢–ò–°–¢–ò–ö–ò
			// –ë–µ—Ä–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ (–æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å –≤ DOM)
			const historyRows = document.querySelectorAll('.history-row');
			const attempts = historyRows.length;
			document.getElementById('attempt-count').innerText = attempts;

			const listContainer = document.getElementById('win-history-list');
			listContainer.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞

			// –ö–æ–ø–∏—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤ –º–æ–¥–∞–ª–∫—É (–≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ–±—ã –ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –±—ã–ª–∞ —Å–≤–µ—Ä—Ö—É)
			// historyRows —Å–µ–π—á–∞—Å –≤ –ø–æ—Ä—è–¥–∫–µ "–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É", –ø–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å –¥–ª—è —Å–ø–∏—Å–∫–∞ "1, 2, 3..."
			// –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å. –î–∞–≤–∞–π –æ—Å—Ç–∞–≤–∏–º –∫–∞–∫ –≤ –ª–æ–≥–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≤–µ—Ä—Ö—É).
			
			historyRows.forEach(row => {
				const miniRow = document.createElement('div');
				miniRow.className = 'mini-row';
				// –ë–µ—Ä–µ–º —Ç–µ–∫—Å—Ç –∏–∑ HTML —Å—Ç—Ä–æ–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏
				// row.children[0] —ç—Ç–æ –ò–º—è, row.children[1] —ç—Ç–æ –ò–∫–æ–Ω–∫–∏
				miniRow.innerHTML = `<span>${row.children[0].innerText}</span> <span>${row.children[1].innerText}</span>`;
				listContainer.appendChild(miniRow);
			});
			
			// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
			const modal = document.getElementById('win-modal');
			modal.classList.add('visible');
			if(instant) modal.style.transition = 'none';
		}


		function closeModal() {
			document.getElementById('win-modal').classList.remove('visible');
		}

		function updateCountdown() {
			const now = new Date();
			const tomorrow = new Date(now);
			tomorrow.setDate(tomorrow.getDate() + 1);
			tomorrow.setHours(0, 0, 0, 0);

			const diff = tomorrow - now;
			
			const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
			const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
			const seconds = Math.floor((diff % (1000 * 60)) / 1000);

			const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

			// –ù–∞—Ö–æ–¥–∏–º –í–°–ï —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º countdown-text –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∏—Ö
			const timers = document.querySelectorAll('.countdown-text');
			timers.forEach(t => t.innerText = timeString);
		}

		// --- DEVELOPER FUNCTIONS ---
		function devResetDaily() {
			// 1. –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –æ –ø–æ–±–µ–¥–µ
			localStorage.removeItem('electle_last_won');
			// 2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
			location.reload();
		}

		function devPlayRandom() {
			// 1. –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ü–µ–ª—å –∏–∑ –±–∞–∑—ã
			const randomIndex = Math.floor(Math.random() * database.length);
			target = database[randomIndex];
			
			// 2. –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
			resetGameState();
			
			// 3. –°–æ–æ–±—â–∞–µ–º —Ç–µ–±–µ, —á—Ç–æ —ç—Ç–æ —Ç–µ—Å—Ç
			console.log("TEST MODE ACTIVATED. Target:", target);
			document.getElementById('selected-display').innerHTML = "<span style='color:orange'>‚ö† TEST MODE: " + target.country + target.year + "</span>";
		}

		// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ (–Ω—É–∂–Ω–∞ –¥–ª—è —Ä–∞–Ω–¥–æ–º–∞)
		function resetGameState() {
			gameActive = true;
			selectedId = null;
			
			// –û—á–∏—Å—Ç–∫–∞ –∫–∞—Ä—Ç—ã
			document.querySelectorAll('path').forEach(p => {
				p.classList.remove('correct', 'wrong', 'regional', 'selected');
			});
			
			// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
			document.getElementById('diagram-img').src = target.img;
			
			// –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π
			document.getElementById('year-input').value = '';
			document.getElementById('year-input').disabled = false;
			document.getElementById('submit-btn').disabled = false;
			
			// –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
			document.getElementById('history').innerHTML = '';
			
			// –°–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
			document.getElementById('win-modal').classList.remove('visible');
			
			// –°–±—Ä–æ—Å –∑—É–º–∞
			if(panZoom) panZoom.reset();
		}
    </script>
	<!-- DEV TOOLS -->
	<div style="margin-top: 50px; margin-bottom: 20px; opacity: 0.5; text-align: center;">
		<p style="font-size: 12px; color: #666;">üîß DEVELOPER ZONE</p>
		<button onclick="devResetDaily()" style="padding: 5px 10px; cursor: pointer;">üîÑ Reset Daily Progress</button>
		<button onclick="devPlayRandom()" style="padding: 5px 10px; cursor: pointer;">üé≤ Test Random Level</button>
	</div>

</body>
</html>

